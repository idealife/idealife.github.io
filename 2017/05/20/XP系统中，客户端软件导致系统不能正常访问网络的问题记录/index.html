<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>XP系统中，客户端软件导致系统不能正常访问网络的问题记录 | iDealife</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近接到了一些用户的反馈，打开我们的客户端软件后，不仅登录不上，而且还会导致浏览器不能正常访问网络。不过这部分用户有一个共同的特征：用的XP系统。虽然XP已经落后这个时代了，但是也不能彻底放弃它，毕竟用户还在上面。 所以就开始了漫长的问题查找，首先要复现出用户的问题。在XP的虚拟中成功复现了问题，那么查原因就好办多了。">
<meta name="keywords" content="调试">
<meta property="og:type" content="article">
<meta property="og:title" content="XP系统中，客户端软件导致系统不能正常访问网络的问题记录">
<meta property="og:url" content="http://idealife.github.io/2017/05/20/XP系统中，客户端软件导致系统不能正常访问网络的问题记录/index.html">
<meta property="og:site_name" content="iDealife">
<meta property="og:description" content="最近接到了一些用户的反馈，打开我们的客户端软件后，不仅登录不上，而且还会导致浏览器不能正常访问网络。不过这部分用户有一个共同的特征：用的XP系统。虽然XP已经落后这个时代了，但是也不能彻底放弃它，毕竟用户还在上面。 所以就开始了漫长的问题查找，首先要复现出用户的问题。在XP的虚拟中成功复现了问题，那么查原因就好办多了。">
<meta property="og:updated_time" content="2017-09-09T09:24:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="XP系统中，客户端软件导致系统不能正常访问网络的问题记录">
<meta name="twitter:description" content="最近接到了一些用户的反馈，打开我们的客户端软件后，不仅登录不上，而且还会导致浏览器不能正常访问网络。不过这部分用户有一个共同的特征：用的XP系统。虽然XP已经落后这个时代了，但是也不能彻底放弃它，毕竟用户还在上面。 所以就开始了漫长的问题查找，首先要复现出用户的问题。在XP的虚拟中成功复现了问题，那么查原因就好办多了。">
  
    <link rel="alternate" href="/atom.xml" title="iDealife" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-101836695-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">iDealife</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Stay hungry, Stay foolish.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://idealife.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-XP系统中，客户端软件导致系统不能正常访问网络的问题记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/20/XP系统中，客户端软件导致系统不能正常访问网络的问题记录/" class="article-date">
  <time datetime="2017-05-20T07:57:35.000Z" itemprop="datePublished">2017-05-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/系统/">系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      XP系统中，客户端软件导致系统不能正常访问网络的问题记录
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近接到了一些用户的反馈，打开我们的客户端软件后，不仅登录不上，而且还会导致浏览器不能正常访问网络。不过这部分用户有一个共同的特征：用的XP系统。虽然XP已经落后这个时代了，但是也不能彻底放弃它，毕竟用户还在上面。</p>
<p>所以就开始了漫长的问题查找，首先要复现出用户的问题。在XP的虚拟中成功复现了问题，那么查原因就好办多了。</p>
<a id="more"></a>
<p>发现用户登录的时候，很多登录时相关的请求都会失败，这才恍然大悟。最近更新了部分服务器，但是DNS解析还会解析到原来的IP地址，导致客户端在登录的断线重连。</p>
<figure class="highlight excel"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -<span class="built_in">na</span> | <span class="built_in">find</span> <span class="string">"SYS_SEND"</span></div></pre></td></tr></table></figure>
<p>通过命令发现出现十个SYS_SEND后，后面的请求就不会再继续发送，网络被阻塞住。</p>
<h3 id="Windows-XP-SP2-has-a-limitation-of-10-outgoing-half-open-TCP-connections-i-e-TCP-connections-in-the-“SYN-SENT”-stage"><a href="#Windows-XP-SP2-has-a-limitation-of-10-outgoing-half-open-TCP-connections-i-e-TCP-connections-in-the-“SYN-SENT”-stage" class="headerlink" title="Windows XP SP2 has a limitation of 10 outgoing half-open TCP connections (i.e.: TCP connections in the “SYN_SENT” stage)"></a>Windows XP SP2 has a limitation of 10 outgoing half-open TCP connections (i.e.: TCP connections in the “SYN_SENT” stage)</h3><p>所以修复DNS的指向就能解决这个问题。</p>
<p>另外也是有工具可以修改XP中的最大连接数的，这个对于用户而言是有些不友好的，这是那个时代的Geek玩家的玩法。</p>
<p><code>This is a security feature of XP (SP2 onwards), and a pretty useless one at that. You need to edit the tcpip.sys file. Windws XP SP2 introduces a few new twists to TCP/IP in order to babysit users and &quot;reduce the threat&quot; of worms spreading fast without control. In one such attempt, the devs seem to have limited the number of possible TCP connection attempts per second to 10 (from unlimited in SP1). This argumentative feature can possibly affect server and P2P programs that need to open many outbound connections at the same time. This site provides an automatic (and manual method if you&#39;re worried about the Event ID 4226 Patcher application) for editing the tcpip.sys file. I used the automated (application) many years ago and it worked like a charm</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://idealife.github.io/2017/05/20/XP系统中，客户端软件导致系统不能正常访问网络的问题记录/" data-id="cj7dawyyj001fe46rpcmllnef" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/调试/">调试</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/06/03/Hexo站点的一些配制总结/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hexo站点的一些配制总结
        
      </div>
    </a>
  
  
    <a href="/2017/02/16/时间组件和日期组件/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">时间组件和日期组件</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Qml/">Qml</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iDev/">iDev</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/系统/">系统</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Apple-Watch/">Apple Watch</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Grunt/">Grunt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac-OS-X/">Mac OS X</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJs/">NodeJs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qml/">Qml</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt/">Qt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS-Code/">VS Code</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xcode/">Xcode</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xib/">Xib</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwplayer/">jwplayer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/watchOS2-0/">watchOS2.0</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域/">跨域</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apple-Watch/" style="font-size: 12.5px;">Apple Watch</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Grunt/" style="font-size: 10px;">Grunt</a> <a href="/tags/Hexo/" style="font-size: 12.5px;">Hexo</a> <a href="/tags/JavaScript/" style="font-size: 12.5px;">JavaScript</a> <a href="/tags/Mac-OS-X/" style="font-size: 12.5px;">Mac OS X</a> <a href="/tags/NodeJs/" style="font-size: 10px;">NodeJs</a> <a href="/tags/Qml/" style="font-size: 17.5px;">Qml</a> <a href="/tags/Qt/" style="font-size: 10px;">Qt</a> <a href="/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/tags/Xcode/" style="font-size: 20px;">Xcode</a> <a href="/tags/Xib/" style="font-size: 15px;">Xib</a> <a href="/tags/jwplayer/" style="font-size: 10px;">jwplayer</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/watchOS2-0/" style="font-size: 10px;">watchOS2.0</a> <a href="/tags/调试/" style="font-size: 12.5px;">调试</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/08/24/NPM包管理中的陷阱/">NPM包管理中的陷阱</a>
          </li>
        
          <li>
            <a href="/2017/06/29/VS-Code中的插件以及相关配置/">VS Code中的插件以及相关配置</a>
          </li>
        
          <li>
            <a href="/2017/06/03/Hexo站点的一些配制总结/">Hexo站点的一些配制总结</a>
          </li>
        
          <li>
            <a href="/2017/05/20/XP系统中，客户端软件导致系统不能正常访问网络的问题记录/">XP系统中，客户端软件导致系统不能正常访问网络的问题记录</a>
          </li>
        
          <li>
            <a href="/2017/02/16/时间组件和日期组件/">时间组件和日期组件</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
    <div class="widget-wrap">
        <h3 class="widget-title">友情链接</h3>
        <div class="widget">
            <ul>
                
                    <li class='link'>
                        <a href='http://blog.csdn.net/qustdong'>
                            QustDong&#39;s Blog
                        </a>
                    </li>
                    
            </ul>
        </div>
    </div>
    
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Dong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>